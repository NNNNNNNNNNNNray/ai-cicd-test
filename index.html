<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI CI/CD 展示 · add() 操作台</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: rgba(255, 255, 255, 0.08);
      --panel-2: rgba(255, 255, 255, 0.06);
      --border: rgba(255, 255, 255, 0.12);
      --text: rgba(255, 255, 255, 0.92);
      --muted: rgba(255, 255, 255, 0.68);
      --accent: #7c5cff;
      --accent-2: #19d3ff;
      --good: #1dd1a1;
      --bad: #ff6b6b;
      --shadow: 0 16px 50px rgba(0, 0, 0, 0.35);
    }
    [data-theme="light"] {
      --bg: #f6f7fb;
      --panel: rgba(255, 255, 255, 0.85);
      --panel-2: rgba(255, 255, 255, 0.7);
      --border: rgba(20, 20, 20, 0.10);
      --text: rgba(10, 10, 10, 0.92);
      --muted: rgba(10, 10, 10, 0.62);
      --accent: #5b5cff;
      --accent-2: #00bcd4;
      --good: #0b8f6a;
      --bad: #c0392b;
      --shadow: 0 14px 40px rgba(0, 0, 0, 0.12);
    }
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 0;
      line-height: 1.5;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(124, 92, 255, 0.38), transparent 55%),
        radial-gradient(900px 500px at 80% 20%, rgba(25, 211, 255, 0.30), transparent 60%),
        radial-gradient(900px 600px at 60% 110%, rgba(29, 209, 161, 0.18), transparent 60%),
        linear-gradient(180deg, rgba(0, 0, 0, 0.0), rgba(0, 0, 0, 0.18)),
        var(--bg);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 28px 16px 48px;
      position: relative;
      overflow-x: hidden;
    }
    /* Tech background: subtle grid + scan + particles (CSS-only) */
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.55;
      background:
        linear-gradient(to right, rgba(255, 255, 255, 0.06) 1px, transparent 1px) 0 0 / 56px 56px,
        linear-gradient(to bottom, rgba(255, 255, 255, 0.045) 1px, transparent 1px) 0 0 / 56px 56px;
      mask-image: radial-gradient(700px 480px at 20% 20%, black 40%, transparent 72%);
    }
    body::after {
      content: "";
      position: fixed;
      inset: -20%;
      pointer-events: none;
      background:
        radial-gradient(circle at 15% 30%, rgba(25, 211, 255, 0.18), transparent 45%),
        radial-gradient(circle at 80% 20%, rgba(124, 92, 255, 0.22), transparent 45%),
        radial-gradient(circle at 60% 85%, rgba(29, 209, 161, 0.14), transparent 48%),
        repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.03) 0 1px, transparent 1px 10px);
      filter: blur(0.2px);
      animation: drift 14s linear infinite;
      opacity: 0.55;
    }
    @keyframes drift {
      0% { transform: translate3d(0, 0, 0); }
      100% { transform: translate3d(-2.5%, 1.5%, 0); }
    }
    .scan {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background: linear-gradient(180deg, transparent, rgba(25, 211, 255, 0.08), transparent);
      height: 220px;
      transform: translateY(-240px);
      animation: scan 7.5s ease-in-out infinite;
      mix-blend-mode: screen;
      opacity: 0.55;
    }
    @keyframes scan {
      0% { transform: translateY(-240px); }
      55% { transform: translateY(calc(100vh + 240px)); }
      100% { transform: translateY(calc(100vh + 240px)); }
    }
    .app {
      width: min(980px, 100%);
      position: relative;
      z-index: 1;
    }
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo {
      width: 38px;
      height: 38px;
      border-radius: 12px;
      background:
        linear-gradient(135deg, rgba(124, 92, 255, 0.95), rgba(25, 211, 255, 0.75));
      box-shadow: 0 10px 25px rgba(124, 92, 255, 0.25);
      position: relative;
      overflow: hidden;
    }
    .logo::after {
      content: "";
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.50), transparent 55%);
      transform: rotate(18deg);
    }
    h1 {
      font-size: 18px;
      margin: 0;
      letter-spacing: 0.2px;
    }
    .subtitle {
      margin: 2px 0 0;
      font-size: 13px;
      color: var(--muted);
    }
    .actions {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .pill {
      border: 1px solid var(--border);
      background: var(--panel);
      color: var(--text);
      border-radius: 999px;
      padding: 9px 12px;
      font-size: 13px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      display: inline-flex;
      gap: 8px;
      align-items: center;
      user-select: none;
    }
    .pill strong { font-weight: 700; }
    .toggle {
      appearance: none;
      width: 44px;
      height: 26px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid var(--border);
      position: relative;
      cursor: pointer;
      box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.06);
    }
    .toggle::after {
      content: "";
      position: absolute;
      top: 3px;
      left: 3px;
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.55));
      transition: transform 160ms ease;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    }
    [data-theme="light"] .toggle {
      background: rgba(20, 20, 20, 0.06);
    }
    .toggle:checked {
      background: rgba(124, 92, 255, 0.35);
    }
    .toggle:checked::after {
      transform: translateX(18px);
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 860px) {
      .grid {
        grid-template-columns: 1.05fr 0.95fr;
        align-items: start;
      }
    }

    .card {
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }
    .card h2 {
      margin: 0 0 6px;
      font-size: 15px;
      letter-spacing: 0.2px;
    }
    .card p {
      margin: 0 0 12px;
      font-size: 13px;
      color: var(--muted);
    }
    label {
      display: block;
      margin-top: 0.75rem;
      font-weight: 600;
      font-size: 13px;
    }
    input {
      width: 100%;
      padding: 10px 12px;
      margin-top: 0.25rem;
      box-sizing: border-box;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--panel-2);
      color: var(--text);
      outline: none;
    }
    input:focus {
      border-color: rgba(124, 92, 255, 0.55);
      box-shadow: 0 0 0 4px rgba(124, 92, 255, 0.18);
    }
    select {
      width: 100%;
      padding: 10px 12px;
      margin-top: 0.25rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--panel-2);
      color: var(--text);
      outline: none;
      appearance: none;
    }
    button {
      margin-top: 12px;
      padding: 10px 12px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.14);
      color: white;
      background: linear-gradient(135deg, rgba(124, 92, 255, 0.95), rgba(25, 211, 255, 0.75));
      box-shadow: 0 14px 30px rgba(124, 92, 255, 0.22);
      width: 100%;
    }
    button.secondary {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      box-shadow: none;
    }
    button:active {
      transform: translateY(1px);
    }
    #result {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(29, 209, 161, 0.10);
      font-weight: 700;
      color: var(--good);
    }
    .row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .small {
      font-size: 12px;
      color: var(--muted);
      margin-top: 8px;
    }
    .kbd {
      display: inline-flex;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.06);
      border-radius: 8px;
      padding: 1px 6px;
      font-size: 12px;
      margin: 0 2px;
    }
    .history {
      margin-top: 12px;
      border-top: 1px solid var(--border);
      padding-top: 12px;
    }
    .history h3 {
      margin: 0 0 8px;
      font-size: 13px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .historyList {
      list-style: none;
      padding: 0;
      margin: 0;
      display: grid;
      gap: 8px;
    }
    .historyItem {
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.04);
      border-radius: 12px;
      padding: 10px 12px;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      font-size: 13px;
      align-items: baseline;
    }
    .historyItem code {
      color: var(--text);
    }
    .badge {
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 2px 8px;
      white-space: nowrap;
    }
    .error {
      margin-top: 12px;
      padding: 10px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255, 107, 107, 0.35);
      background: rgba(255, 107, 107, 0.10);
      color: var(--bad);
      font-weight: 700;
    }
  </style>
</head>
<body>
  <div class="scan" aria-hidden="true"></div>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>AI CI/CD 展示 · add() 操作台</h1>
          <div class="subtitle">CI 通過後自動部署到 GitHub Pages 的靜態頁面。</div>
        </div>
      </div>
      <div class="actions">
        <div class="pill" title="目前核心行為">
          <span>核心 <strong>add(a,b)</strong> =</span>
          <span class="badge">乘法</span>
        </div>
        <div class="pill" title="切換主題">
          <span>主題</span>
          <input id="themeToggle" class="toggle" type="checkbox" role="switch" aria-label="切換深淺色主題">
        </div>
      </div>
    </div>

    <div class="grid">
      <section class="card" aria-labelledby="coreDemoTitle">
        <h2 id="coreDemoTitle">核心行為展示</h2>
        <p>
          這裡用 JavaScript 模擬目前 repo 的邏輯：<code>add(a, b)</code> 回傳 <strong>a × b</strong>。
          你可以改數字後按 <span class="kbd">Enter</span>。
        </p>

        <div class="row">
          <div>
            <label for="a">A</label>
            <input id="a" name="a" type="number" value="2" inputmode="decimal" step="any">
          </div>
          <div>
            <label for="b">B</label>
            <input id="b" name="b" type="number" value="3" inputmode="decimal" step="any">
          </div>
        </div>

        <button id="btnCore" type="button">執行核心 add()</button>
        <div id="result" aria-live="polite"></div>
        <div id="coreError" class="error" style="display:none" aria-live="polite"></div>
        <div class="small">
          小技巧：按 <span class="kbd">Enter</span> 可執行；按 <span class="kbd">Esc</span> 可清除訊息。
        </div>
      </section>

      <section class="card" aria-labelledby="toolTitle">
        <h2 id="toolTitle">進階工具（與核心邏輯無關）</h2>
        <p>
          為了讓介面更完整，這裡提供可選運算與歷史紀錄的小工具。
          這只是前端功能，不會影響你的 Python 邏輯。
        </p>

        <label for="op">運算</label>
        <select id="op" name="op">
          <option value="add">加法 (A + B)</option>
          <option value="sub">減法 (A − B)</option>
          <option value="mul">乘法 (A × B)</option>
          <option value="div">除法 (A ÷ B)</option>
        </select>

        <div class="row">
          <div>
            <label for="x">A</label>
            <input id="x" name="x" type="number" value="10" inputmode="decimal" step="any">
          </div>
          <div>
            <label for="y">B</label>
            <input id="y" name="y" type="number" value="5" inputmode="decimal" step="any">
          </div>
        </div>

        <button id="btnCalc" type="button">計算</button>
        <button id="btnClear" class="secondary" type="button">清除歷史</button>
        <div id="calcError" class="error" style="display:none" aria-live="polite"></div>

        <div class="history">
          <h3>歷史紀錄</h3>
          <ul id="historyList" class="historyList" aria-label="計算歷史紀錄"></ul>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ---- Core logic mimic (matches current repo behavior) ----
    function add(a, b) {
      const x = Number(a);
      const y = Number(b);
      if (Number.isNaN(x) || Number.isNaN(y)) {
        return NaN;
      }
      return x * y;
    }

    function setVisible(el, visible) {
      el.style.display = visible ? "" : "none";
    }

    function runCore() {
      const a = document.getElementById("a").value;
      const b = document.getElementById("b").value;
      const result = add(a, b);
      const container = document.getElementById("result");
      const err = document.getElementById("coreError");

      if (Number.isNaN(result)) {
        setVisible(err, true);
        err.textContent = "請輸入有效的 A、B 數值。";
        container.textContent = "";
        return;
      }
      setVisible(err, false);
      container.textContent = `結果：${result}`;
    }

    // ---- Extra calculator tool ----
    function symbol(op) {
      return { add: "+", sub: "−", mul: "×", div: "÷" }[op] ?? "?";
    }

    function calc(op, a, b) {
      if (op === "add") return a + b;
      if (op === "sub") return a - b;
      if (op === "mul") return a * b;
      if (op === "div") return a / b;
      return NaN;
    }

    function formatNumber(n) {
      if (!Number.isFinite(n)) return String(n);
      // keep it readable (avoid huge floats)
      const s = n.toString();
      if (s.includes("e")) return n.toPrecision(10);
      return s.length > 14 ? n.toPrecision(12) : s;
    }

    function addHistoryItem(expression, value) {
      const list = document.getElementById("historyList");
      const item = document.createElement("li");
      item.className = "historyItem";

      const left = document.createElement("span");
      left.innerHTML = `<code>${expression}</code>`;

      const right = document.createElement("span");
      right.className = "badge";
      right.textContent = formatNumber(value);

      item.appendChild(left);
      item.appendChild(right);

      list.prepend(item);

      // keep last 8
      while (list.children.length > 8) list.removeChild(list.lastChild);
    }

    function runCalc() {
      const op = document.getElementById("op").value;
      const a = Number(document.getElementById("x").value);
      const b = Number(document.getElementById("y").value);
      const err = document.getElementById("calcError");

      if (Number.isNaN(a) || Number.isNaN(b)) {
        setVisible(err, true);
        err.textContent = "請輸入有效的 A、B 數值。";
        return;
      }
      if (op === "div" && b === 0) {
        setVisible(err, true);
        err.textContent = "不可除以 0。";
        return;
      }

      setVisible(err, false);
      const value = calc(op, a, b);
      const expr = `${formatNumber(a)} ${symbol(op)} ${formatNumber(b)} =`;
      addHistoryItem(expr, value);
    }

    function clearHistory() {
      document.getElementById("historyList").innerHTML = "";
      setVisible(document.getElementById("calcError"), false);
    }

    // ---- Theme ----
    function applyTheme(theme) {
      document.documentElement.setAttribute("data-theme", theme);
      try { localStorage.setItem("theme", theme); } catch (_) {}
    }

    function initTheme() {
      let theme = "dark";
      try {
        theme = localStorage.getItem("theme") || theme;
      } catch (_) {}
      const isLight = theme === "light";
      document.getElementById("themeToggle").checked = isLight;
      applyTheme(isLight ? "light" : "dark");
    }

    // ---- Wire up events ----
    document.getElementById("btnCore").addEventListener("click", runCore);
    document.getElementById("btnCalc").addEventListener("click", runCalc);
    document.getElementById("btnClear").addEventListener("click", clearHistory);

    document.getElementById("themeToggle").addEventListener("change", (e) => {
      applyTheme(e.target.checked ? "light" : "dark");
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        // 預設執行核心展示；Shift+Enter 執行進階計算器
        if (e.shiftKey) runCalc();
        else runCore();
      }
      if (e.key === "Escape") {
        document.getElementById("result").textContent = "";
        setVisible(document.getElementById("coreError"), false);
        setVisible(document.getElementById("calcError"), false);
      }
    });

    initTheme();
    runCore();
  </script>
</body>
</html>

